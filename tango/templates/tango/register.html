{% load static %}
<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8">
  <title>Registration</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
  <link rel="shortcut icon" href="{% static 'images/Tango.webp' %}" type="image/x-icon">
  <link rel="stylesheet" href="{% static '/Css/login.css' %}">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

</head>
<body>
<!-- partial:index.partial.html -->
<div class="box-form">
    <div class="left">
        <div class="overlay">
            <h1>Tango Six O'Clock</h1>
            <span>
                {% comment %} <p>login with social media</p>
                <a href="#"><i class="fa fa-facebook" aria-hidden="true"></i></a>
                <a href="#"><i class="fa fa-google" aria-hidden="true"></i></a> {% endcomment %}
            </span>
        </div>
    </div>

    <div class="right">
        <h1>Registration</h1>
        <p>Already have an account? <a href="{% url 'loginpage' %}">Login In</a> . You can choose other options for sign up.</p>
        <div class="inputs">
            <form method="POST">
                {% csrf_token %}
                <input class="input" type="text" name="username" id='id_username' placeholder="User name" required>
                <div class="requirements">Username should be at least 4 characters and contain only letters and numbers.</div>
                <div id="usernameError" class="error"></div>

                <input class="input" type="text" name="email" id='id_email' placeholder="Email" required>
                <div class="requirements">Invalid email. Email must contain '@' and have a valid domain (.com or .in).</div>
                <div id="emailError" class="error"></div>

                <input class="input" type="password" name="password1" id='id_password1' placeholder="Password" required>
                <div class="requirements">
                    Password should be at least 10 characters and include at least one numeric character,
                    one lowercase character, one uppercase character, and one of the following symbols: @, !, $.
                </div>

                <input class="input" type="password" name="password2" id='id_password2' placeholder="Confirm password" required>
                <div id="passwordError" class="error"></div>
            </div>

            <br><br>
            
            <br>
            <input class="button" type="submit" value="Sign Up" onclick=" return validateForm()">
        </form>
    </div>

</div>
<!-- partial -->

<script>
    function validateForm() {
        const usernameInput = document.getElementById('id_username');
        const emailInput = document.getElementById('id_email');
        const passwordInput = document.getElementById('id_password1');
        const confirmPasswordInput = document.getElementById('id_password2');

        const username = usernameInput.value;
        const email = emailInput.value;
        const password = passwordInput.value;
        const confirmPassword = confirmPasswordInput.value;

        const usernameError = document.getElementById('usernameError');
        const emailError = document.getElementById('emailError');
        const passwordError = document.getElementById('passwordError');

        // Reset previous errors
        usernameError.innerHTML = '';
        emailError.innerHTML = '';
        passwordError.innerHTML = '';

        // Hide requirements
        document.querySelectorAll('.requirements').forEach(el => el.style.display = 'none');

        // Validate username
        const usernameRegex = /^[a-zA-Z0-9]+$/;
        if (username.length < 4 || !usernameRegex.test(username)) {
            usernameError.innerHTML = 'Username should be at least 4 characters and contain only letters and numbers.';
            usernameInput.classList.add('input-error');
        } else {
            usernameInput.classList.remove('input-error');
        }

        // Simulate username already available check
        // Replace this with actual backend validation
        if (username === 'existingUsername') {
            usernameError.innerHTML = 'Username already available.';
            usernameInput.classList.add('input-error');
        }

        // Validate email
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
            emailError.innerHTML = 'Invalid email. Email must contain "@" and have a valid domain (.com or .in).';
            emailInput.classList.add('input-error');
        } else {
            emailInput.classList.remove('input-error');
        }

        // Simulate email already available check
        // Replace this with actual backend validation
        if (email === 'existing@example.com') {
            emailError.innerHTML = 'Email already available.';
            emailInput.classList.add('input-error');
        }

        // Validate password
        if (password.length < 10 ||
            !/[0-9]/.test(password) ||
            !/[a-z]/.test(password) ||
            !/[A-Z]/.test(password) ||
            !/[@!$]/.test(password)
        ) {
            passwordError.innerHTML = 'Password should be at least 10 characters and include at least one numeric character, one lowercase character, one uppercase character, and one of the following symbols: @, !, $.';
            passwordInput.classList.add('input-error');
        } else {
            passwordInput.classList.remove('input-error');
        }

        // Confirm password match
        if (password !== confirmPassword) {
            passwordError.innerHTML = 'Passwords mismatch.';
            confirmPasswordInput.classList.add('input-error');
        } else {
            confirmPasswordInput.classList.remove('input-error');
        }

        // Form is valid, you can proceed with submission or other actions
        if (!usernameError.innerHTML && !emailError.innerHTML && !passwordError.innerHTML) {
           // alert('Form submitted successfully!');
            return true;
        }

        return false;
    }
</script>




</body>
</html>
